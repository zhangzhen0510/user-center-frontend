(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[947],{93500:function(ce,w,r){"use strict";r.r(w),r.d(w,{default:function(){return le}});var ve=r(57338),G=r(273),fe=r(57663),T=r(71577),me=r(47673),N=r(4107),O=r(93224),x=r(2824),d=r(90636),A=r(11849),he=r(34792),f=r(48086),p=r(3182),C=r(93387),Y=r(49101),z=r(81907),H=r(93760),K=r(85224),J=r(37476),V=r(5966),D=r(90672),Q=r(96459),g=r(67294),pe=r(71194),X=r(50146),F=r(49383),P=r(64317),k=r(86615),q=r(22452),a=r(85893),_=function(l){return(0,a.jsxs)(F.L,{stepsProps:{size:"small"},stepsFormRender:function(i,m){return(0,a.jsx)(X.Z,{width:640,bodyStyle:{padding:"32px 40px 48px"},destroyOnClose:!0,title:"\u89C4\u5219\u914D\u7F6E",visible:l.updateModalVisible,footer:m,onCancel:function(){l.onCancel()},children:i})},onFinish:l.onSubmit,children:[(0,a.jsxs)(F.L.StepForm,{initialValues:{name:l.values.name,desc:l.values.desc},title:"\u57FA\u672C\u4FE1\u606F",children:[(0,a.jsx)(V.Z,{name:"name",label:"\u89C4\u5219\u540D\u79F0",width:"md",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u5219\u540D\u79F0\uFF01"}]}),(0,a.jsx)(D.Z,{name:"desc",width:"md",label:"\u89C4\u5219\u63CF\u8FF0",placeholder:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u81F3\u5C11\u4E94\u4E2A\u5B57\u7B26\u7684\u89C4\u5219\u63CF\u8FF0\uFF01",min:5}]})]}),(0,a.jsxs)(F.L.StepForm,{initialValues:{target:"0",template:"0"},title:"\u914D\u7F6E\u89C4\u5219\u5C5E\u6027",children:[(0,a.jsx)(P.Z,{name:"target",width:"md",label:"\u76D1\u63A7\u5BF9\u8C61",valueEnum:{0:"\u8868\u4E00",1:"\u8868\u4E8C"}}),(0,a.jsx)(P.Z,{name:"template",width:"md",label:"\u89C4\u5219\u6A21\u677F",valueEnum:{0:"\u89C4\u5219\u6A21\u677F\u4E00",1:"\u89C4\u5219\u6A21\u677F\u4E8C"}}),(0,a.jsx)(k.Z.Group,{name:"type",label:"\u89C4\u5219\u7C7B\u578B",options:[{value:"0",label:"\u5F3A"},{value:"1",label:"\u5F31"}]})]}),(0,a.jsxs)(F.L.StepForm,{initialValues:{type:"1",frequency:"month"},title:"\u8BBE\u5B9A\u8C03\u5EA6\u5468\u671F",children:[(0,a.jsx)(q.Z,{name:"time",width:"md",label:"\u5F00\u59CB\u65F6\u95F4",rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5F00\u59CB\u65F6\u95F4\uFF01"}]}),(0,a.jsx)(P.Z,{name:"frequency",label:"\u76D1\u63A7\u5BF9\u8C61",width:"md",valueEnum:{month:"\u6708",week:"\u5468"}})]})]})},ee=_,re=["defaultRender"],ae=function(){var Z=(0,p.Z)((0,d.Z)().mark(function l(u){var i;return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.ZP.loading("\u6B63\u5728\u6DFB\u52A0"),e.prev=1,e.next=4,(0,C.HP)((0,A.Z)({},u));case 4:return i(),f.ZP.success("Added successfully"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),f.ZP.error("Adding failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},l,null,[[1,9]])}));return function(u){return Z.apply(this,arguments)}}(),ne=function(){var Z=(0,p.Z)((0,d.Z)().mark(function l(u){var i;return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=f.ZP.loading("Configuring"),e.prev=1,e.next=4,(0,C.D7)({name:u.name,desc:u.desc,key:u.key});case 4:return i(),f.ZP.success("Configuration is successful"),e.abrupt("return",!0);case 9:return e.prev=9,e.t0=e.catch(1),i(),f.ZP.error("Configuration failed, please try again!"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},l,null,[[1,9]])}));return function(u){return Z.apply(this,arguments)}}(),te=function(){var Z=(0,p.Z)((0,d.Z)().mark(function l(u){var i;return(0,d.Z)().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=f.ZP.loading("\u6B63\u5728\u5220\u9664"),u){e.next=3;break}return e.abrupt("return",!0);case 3:return e.prev=3,e.next=6,(0,C.DV)({key:u.map(function(R){return R.key})});case 6:return i(),f.ZP.success("Deleted successfully and will refresh soon"),e.abrupt("return",!0);case 11:return e.prev=11,e.t0=e.catch(3),i(),f.ZP.error("Delete failed, please try again"),e.abrupt("return",!1);case 16:case"end":return e.stop()}},l,null,[[3,11]])}));return function(u){return Z.apply(this,arguments)}}(),se=function(){var l=(0,g.useState)(!1),u=(0,x.Z)(l,2),i=u[0],m=u[1],e=(0,g.useState)(!1),R=(0,x.Z)(e,2),ue=R[0],b=R[1],ie=(0,g.useState)(!1),I=(0,x.Z)(ie,2),$=I[0],B=I[1],y=(0,g.useRef)(),de=(0,g.useState)(),E=(0,x.Z)(de,2),c=E[0],S=E[1],oe=(0,g.useState)([]),L=(0,x.Z)(oe,2),j=L[0],M=L[1],U=[{title:"\u89C4\u5219\u540D\u79F0",dataIndex:"name",tip:"The rule name is the unique key",render:function(n,t){return(0,a.jsx)("a",{onClick:function(){S(t),B(!0)},children:n})}},{title:"\u63CF\u8FF0",dataIndex:"desc",valueType:"textarea"},{title:"\u670D\u52A1\u8C03\u7528\u6B21\u6570",dataIndex:"callNo",sorter:!0,hideInForm:!0,renderText:function(n){return"".concat(n,"\u4E07")}},{title:"\u72B6\u6001",dataIndex:"status",hideInForm:!0,valueEnum:{0:{text:"\u5173\u95ED",status:"Default"},1:{text:"\u8FD0\u884C\u4E2D",status:"Processing"},2:{text:"\u5DF2\u4E0A\u7EBF",status:"Success"},3:{text:"\u5F02\u5E38",status:"Error"}}},{title:"\u4E0A\u6B21\u8C03\u5EA6\u65F6\u95F4",sorter:!0,dataIndex:"updatedAt",valueType:"dateTime",renderFormItem:function(n,t,v){var h=t.defaultRender,o=(0,O.Z)(t,re),W=v.getFieldValue("status");return"".concat(W)==="0"?!1:"".concat(W)==="3"?(0,a.jsx)(N.Z,(0,A.Z)((0,A.Z)({},o),{},{placeholder:"\u8BF7\u8F93\u5165\u5F02\u5E38\u539F\u56E0\uFF01"})):h(n)}},{title:"\u64CD\u4F5C",dataIndex:"option",valueType:"option",render:function(n,t){return[(0,a.jsx)("a",{onClick:function(){b(!0),S(t)},children:"\u914D\u7F6E"},"config"),(0,a.jsx)("a",{href:"https://procomponents.ant.design/",children:"\u8BA2\u9605\u8B66\u62A5"},"subscribeAlert")]}}];return(0,a.jsxs)(z.ZP,{children:[(0,a.jsx)(H.Z,{headerTitle:"\u67E5\u8BE2\u8868\u683C",actionRef:y,rowKey:"key",search:{labelWidth:120},toolBarRender:function(){return[(0,a.jsxs)(T.Z,{type:"primary",onClick:function(){m(!0)},children:[(0,a.jsx)(Y.Z,{})," \u65B0\u5EFA"]},"primary")]},request:C.jR,columns:U,rowSelection:{onChange:function(n,t){M(t)}}}),(j==null?void 0:j.length)>0&&(0,a.jsxs)(K.Z,{extra:(0,a.jsxs)("div",{children:["\u5DF2\u9009\u62E9"," ",(0,a.jsx)("a",{style:{fontWeight:600},children:j.length})," ","\u9879 \xA0\xA0",(0,a.jsxs)("span",{children:["\u670D\u52A1\u8C03\u7528\u6B21\u6570\u603B\u8BA1 ",j.reduce(function(s,n){return s+n.callNo},0)," \u4E07"]})]}),children:[(0,a.jsx)(T.Z,{onClick:(0,p.Z)((0,d.Z)().mark(function s(){var n,t;return(0,d.Z)().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,te(j);case 2:M([]),(n=y.current)===null||n===void 0||(t=n.reloadAndRest)===null||t===void 0||t.call(n);case 4:case"end":return h.stop()}},s)})),children:"\u6279\u91CF\u5220\u9664"}),(0,a.jsx)(T.Z,{type:"primary",children:"\u6279\u91CF\u5BA1\u6279"})]}),(0,a.jsxs)(J.Y,{title:"\u65B0\u5EFA\u89C4\u5219",width:"400px",visible:i,onVisibleChange:m,onFinish:function(){var s=(0,p.Z)((0,d.Z)().mark(function n(t){var v;return(0,d.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ae(t);case 2:v=o.sent,v&&(m(!1),y.current&&y.current.reload());case 4:case"end":return o.stop()}},n)}));return function(n){return s.apply(this,arguments)}}(),children:[(0,a.jsx)(V.Z,{rules:[{required:!0,message:"\u89C4\u5219\u540D\u79F0\u4E3A\u5FC5\u586B\u9879"}],width:"md",name:"name"}),(0,a.jsx)(D.Z,{width:"md",name:"desc"})]}),(0,a.jsx)(ee,{onSubmit:function(){var s=(0,p.Z)((0,d.Z)().mark(function n(t){var v;return(0,d.Z)().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,ne(t);case 2:v=o.sent,v&&(b(!1),S(void 0),y.current&&y.current.reload());case 4:case"end":return o.stop()}},n)}));return function(n){return s.apply(this,arguments)}}(),onCancel:function(){b(!1),$||S(void 0)},updateModalVisible:ue,values:c||{}}),(0,a.jsx)(G.Z,{width:600,visible:$,onClose:function(){S(void 0),B(!1)},closable:!1,children:(c==null?void 0:c.name)&&(0,a.jsx)(Q.vY,{column:2,title:c==null?void 0:c.name,request:(0,p.Z)((0,d.Z)().mark(function s(){return(0,d.Z)().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",{data:c||{}});case 1:case"end":return t.stop()}},s)})),params:{id:c==null?void 0:c.name},columns:U})})]})},le=se}}]);
